"use strict";var vt=Object.create;var m=Object.defineProperty,_t=Object.defineProperties,At=Object.getOwnPropertyDescriptor,It=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertyNames,G=Object.getOwnPropertySymbols,Ct=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var $=(t,e,n)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e)=>{for(var n in e||(e={}))J.call(e,n)&&$(t,n,e[n]);if(G)for(var n of G(e))Ut.call(e,n)&&$(t,n,e[n]);return t},x=(t,e)=>_t(t,It(e));var bt=(t,e)=>{for(var n in e)m(t,n,{get:e[n],enumerable:!0})},X=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of St(e))!J.call(t,o)&&o!==n&&m(t,o,{get:()=>e[o],enumerable:!(r=At(e,o))||r.enumerable});return t};var Q=(t,e,n)=>(n=t!=null?vt(Ct(t)):{},X(e||!t||!t.__esModule?m(n,"default",{value:t,enumerable:!0}):n,t)),Et=t=>X(m({},"__esModule",{value:!0}),t);var Wt={};bt(Wt,{default:()=>Qt});module.exports=Et(Wt);var v="https://unifyintent.com/analytics/api/v1";var Tt=/^[A-Za-z0-9._+%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$/;function N(t,e){var n;return((n=e==null?void 0:e.getTime())!=null?n:new Date().getTime())+t*60*1e3}var _=()=>({path:window.location.pathname,query:wt(window.location.href),referrer:document.referrer,title:document.title,url:window.location.href}),A=()=>({userAgent:window.navigator.userAgent,userAgentData:window.navigator.userAgentData}),I=t=>{if(Tt.test(t))return t},wt=t=>{let e=new URL(t).searchParams,n={};for(let[r,o]of e.entries())n[r]=o;return n};var W=()=>{var n,r,o,i,s;let t=new URL(location.href),e={source:(n=t.searchParams.get("utm_source"))!=null?n:void 0,medium:(r=t.searchParams.get("utm_medium"))!=null?r:void 0,campaign:(o=t.searchParams.get("utm_campaign"))!=null?o:void 0,term:(i=t.searchParams.get("utm_term"))!=null?i:void 0,content:(s=t.searchParams.get("utm_content"))!=null?s:void 0};return x(d({locale:navigator.language},A()),{utm:e})};var O=class{constructor(e){this.getBaseActivityPayload=()=>({type:this.getActivityType(),anonymousUserId:this._intentContext.identityManager.getOrCreateAnonymousUserId(),sessionId:this._intentContext.sessionManager.getOrCreateSession().sessionId,context:W(),timestamp:new Date().toISOString()});this._intentContext=e}track(){this._intentContext.apiClient.post(this.getActivityURL(),d(d({},this.getBaseActivityPayload()),this.getActivityData()))}},S=O;var Pt=`${v}/page`,l=class extends S{constructor(){super(...arguments);this.getActivityData=()=>({type:"page",properties:_()})}getActivityType(){return"page"}getActivityURL(){return Pt}};var Dt=`${v}/identify`,f=class extends S{constructor(n,{email:r}){super(n);this.getActivityData=()=>({type:"identify",traits:{email:this._email}});this._email=r}getActivityType(){return"identify"}getActivityURL(){return Dt}};var tt=Q(require("crypto")),U=new Uint8Array(256),C=U.length;function k(){return C>U.length-16&&(tt.default.randomFillSync(U),C=0),U.slice(C,C+=16)}var a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function et(t,e=0){return a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]}var nt=Q(require("crypto")),M={randomUUID:nt.default.randomUUID};function Bt(t,e,n){if(M.randomUUID&&!e&&!t)return M.randomUUID();t=t||{};let r=t.random||(t.rng||k)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return et(r)}var y=Bt;function b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Ft={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function V(t,e){function n(o,i,s){if(typeof document!="undefined"){s=b({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var p in s)s[p]&&(c+="; "+p,s[p]!==!0&&(c+="="+s[p].split(";")[0]));return document.cookie=o+"="+t.write(i,o)+c}}function r(o){if(!(typeof document=="undefined"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],s={},c=0;c<i.length;c++){var p=i[c].split("="),xt=p.slice(1).join("=");try{var L=decodeURIComponent(p[0]);if(s[L]=t.read(xt,L),o===L)break}catch(te){}}return o?s[o]:s}}return Object.create({set:n,get:r,remove:function(o,i){n(o,"",b({},i,{expires:-1}))},withAttributes:function(o){return V(this.converter,b({},this.attributes,o))},withConverter:function(o){return V(b({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var K=V(Ft,{path:"/"});var g=typeof Buffer=="function",rt=typeof TextDecoder=="function"?new TextDecoder:void 0,ot=typeof TextEncoder=="function"?new TextEncoder:void 0,Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=Array.prototype.slice.call(Rt),E=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(h),Lt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),it=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Nt=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),at=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Ot=t=>{let e,n,r,o,i="",s=t.length%3;for(let c=0;c<t.length;){if((n=t.charCodeAt(c++))>255||(r=t.charCodeAt(c++))>255||(o=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=h[e>>18&63]+h[e>>12&63]+h[e>>6&63]+h[e&63]}return s?i.slice(0,s-3)+"===".substring(s):i},ut=typeof btoa=="function"?t=>btoa(t):g?t=>Buffer.from(t,"binary").toString("base64"):Ot,kt=g?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,o=t.length;r<o;r+=4096)n.push(u.apply(null,t.subarray(r,r+4096)));return ut(n.join(""))};var Mt=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?u(192|e>>>6)+u(128|e&63):u(224|e>>>12&15)+u(128|e>>>6&63)+u(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return u(240|e>>>18&7)+u(128|e>>>12&63)+u(128|e>>>6&63)+u(128|e&63)}},Vt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Kt=t=>t.replace(Vt,Mt),st=g?t=>Buffer.from(t,"utf8").toString("base64"):ot?t=>kt(ot.encode(t)):t=>ut(Kt(t)),T=(t,e=!1)=>e?Nt(st(t)):st(t);var jt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,zt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return u((n>>>10)+55296)+u((n&1023)+56320);case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Ht=t=>t.replace(jt,zt),Yt=t=>{if(t=t.replace(/\s+/g,""),!Lt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,o;for(let i=0;i<t.length;)e=E[t.charAt(i++)]<<18|E[t.charAt(i++)]<<12|(r=E[t.charAt(i++)])<<6|(o=E[t.charAt(i++)]),n+=r===64?u(e>>16&255):o===64?u(e>>16&255,e>>8&255):u(e>>16&255,e>>8&255,e&255);return n},ct=typeof atob=="function"?t=>atob(at(t)):g?t=>Buffer.from(t,"base64").toString("binary"):Yt,Zt=g?t=>it(Buffer.from(t,"base64")):t=>it(ct(t).split("").map(e=>e.charCodeAt(0)));var qt=g?t=>Buffer.from(t,"base64").toString("utf8"):rt?t=>rt.decode(Zt(t)):t=>Ht(ct(t)),Gt=t=>at(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),dt=t=>qt(Gt(t));var j="test";function z(t){return T(JSON.stringify(t))}function pt(t){return JSON.parse(dt(t))}function lt(){try{return localStorage.setItem(j,j),localStorage.removeItem(j),!0}catch(t){return!1}}var H=class{constructor(e){this.get=e=>{let n=this.retrieveValue(this.buildKey(e));return n?pt(n):null};this.set=(e,n)=>{this.storeValue(this.buildKey(e),z(n))};this.buildKey=e=>z(`${this._writeKey}_${e}`);this._writeKey=e}},w=H;var P=class extends w{retrieveValue(e){var n;return(n=K.get(e))!=null?n:null}storeValue(e,n){K.set(e,n)}};var D=class extends w{constructor(n){super(n);this.retrieveValue=n=>this._localStorageAvailable?localStorage.getItem(n):null;this.storeValue=(n,r)=>{this._localStorageAvailable&&localStorage.setItem(n,r)};this._localStorageAvailable=lt()}};var ft="anonymousUserId",B=class{constructor(e){this.getOrCreateAnonymousUserId=()=>{if(this._anonymousUserId)return this._anonymousUserId;let e=this.getAnonymousUserId()||this.createAnonymousUserId();return this._anonymousUserId=e,e};this.getAnonymousUserId=()=>this._storageService.get(ft);this.createAnonymousUserId=()=>{let e=y();return this._storageService.set(ft,e),e};this._storageService=new P(e),this._anonymousUserId=null}};var gt="clientSession",mt=30,F=class{constructor(e){this.getOrCreateSession=()=>this.getAndUpdateSession()||this.createSession();this.getAndUpdateSession=()=>{let e=this._currentSession||this.getStoredSession();if(!e)return;if(e.expiration>new Date().getTime())return this.updateSessionExpiration(e)};this.createSession=(e=mt)=>{let n=d({sessionId:y(),startTime:new Date,expiration:N(e),initial:_()},A());return this._currentSession=n,this.setStoredSession(n),n};this.updateSessionExpiration=(e,n=mt)=>{let r=x(d({},e),{expiration:N(n)});return this._currentSession=r,this.setStoredSession(r),r};this.getStoredSession=()=>this._storageService.get(gt);this.setStoredSession=e=>{this._storageService.set(gt,e)};this._writeKey=e,this._storageService=new D(this._writeKey),this._currentSession=null}};var Y=class{constructor(e){this.post=(e,n)=>{let r=JSON.stringify(n),o=this.getAuthString(this._writeKey);if(fetch)fetch(e,{method:"POST",body:r,credentials:"include",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.getAuthString(this._writeKey)},keepalive:!0}).catch(()=>{});else{let i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","application/json; charset=UTF-8"),i.setRequestHeader("Authorization",o),i.send(r)}};this._writeKey=e}getAuthString(e){return`Basic ${T(e+":")}`}},yt=Y;var Z=class{constructor(e){this.startAutoPage=()=>{this._historyMonitored||this.monitorHistory(),this._autoPage=!0};this.stopAutoPage=()=>{this._autoPage=!1};this.startAutoIdentify=()=>{this._autoIdentify=!0,this.refreshMonitoredInputs(),setInterval(this.refreshMonitoredInputs,2e3)};this.stopAutoIdentify=()=>{this._monitoredInputs.forEach(e=>{e.isConnected&&(e.removeEventListener("blur",this.handleInputBlur),e.removeEventListener("keydown",this.handleInputKeydown))}),this._monitoredInputs.clear(),this._autoIdentify=!1};this.monitorHistory=()=>{let e=history.pushState;history.pushState=(...r)=>{e.apply(history,r),this.maybeTrackPage()};let n=history.replaceState;history.replaceState=(...r)=>{let o=d({},window.location);n.apply(history,r),$t(o,window.location)&&this.maybeTrackPage()},window.addEventListener("popstate",()=>{this.maybeTrackPage()}),this._historyMonitored=!0};this.maybeTrackPage=()=>{this._autoPage&&new l(this._intentContext).track()};this.refreshMonitoredInputs=()=>{if(!this._autoIdentify)return;this._monitoredInputs.forEach(n=>{n.isConnected||this._monitoredInputs.delete(n)}),Array.from(document.getElementsByTagName("input")).filter(n=>!this._monitoredInputs.has(n)&&Jt(n)).forEach(n=>{n.addEventListener("blur",this.handleInputBlur),n.addEventListener("keydown",this.handleInputKeydown),this._monitoredInputs.add(n)})};this.handleInputBlur=e=>{this._autoIdentify&&this.maybeIdentifyInputEmail(e)};this.handleInputKeydown=e=>{this._autoIdentify&&e.key==="Enter"&&this.maybeIdentifyInputEmail(e)};this.maybeIdentifyInputEmail=e=>{var r;if(!this._autoIdentify||!(e.target instanceof HTMLInputElement))return;let n=(r=e.target)==null?void 0:r.value;if(n){if(!I(n)||this._submittedEmails.has(n))return;new f(this._intentContext,{email:n}).track(),this._submittedEmails.add(n)}};this.__getMonitoredInputs=()=>this._monitoredInputs;this.__getSubmittedEmails=()=>this._submittedEmails;var n,r;this._intentContext=e,this._monitoredInputs=new Set,this._submittedEmails=new Set,this._autoPage=(n=e.clientConfig.autoPage)!=null?n:!1,this._autoIdentify=(r=e.clientConfig.autoIdentify)!=null?r:!1,this._historyMonitored=!1,this._autoPage&&(this.startAutoPage(),this.maybeTrackPage()),this._autoIdentify&&this.startAutoIdentify()}};function $t(t,e){return t.hostname!==e.hostname||t.pathname!==e.pathname}function Jt(t){return t.type==="email"||t.type==="text"}var R=Z;var Xt={autoPage:!1,autoIdentify:!1},q=class{constructor(e,n=Xt){this.page=()=>{new l(this._context).track()};this.identify=e=>{let n=I(e);return n?(new f(this._context,{email:n}).track(),!0):!1};this.startAutoPage=()=>{this._intentAgent||(this._intentAgent=new R(this._context)),this._intentAgent.startAutoPage()};this.stopAutoPage=()=>{var e;(e=this._intentAgent)==null||e.stopAutoPage()};this.startAutoIdentify=()=>{this._intentAgent||(this._intentAgent=new R(this._context)),this._intentAgent.startAutoIdentify()};this.stopAutoIdentify=()=>{var e;(e=this._intentAgent)==null||e.stopAutoIdentify()};window.unify!==void 0&&!Array.isArray(window.unify)&&console.warn("Global UnifyIntentClient already exists, a new one will not be created.");let r=new yt(e),o=new F(e);o.getOrCreateSession();let i=new B(e);i.getOrCreateAnonymousUserId(),this._context={writeKey:e,clientConfig:n,apiClient:r,sessionManager:o,identityManager:i},(n.autoPage||n.autoIdentify)&&(this._intentAgent=new R(this._context))}},ht=q;var Qt=ht;
/*! Bundled license information:

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)
*/
