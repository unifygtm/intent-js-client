"use strict";var _=Object.defineProperty,pt=Object.defineProperties,lt=Object.getOwnPropertyDescriptor,ft=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertyNames,Z=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var q=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))G.call(t,n)&&q(e,n,t[n]);if(Z)for(var n of Z(t))yt.call(t,n)&&q(e,n,t[n]);return e},A=(e,t)=>pt(e,ft(t));var mt=(e,t)=>{for(var n in t)_(e,n,{get:t[n],enumerable:!0})},ht=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of gt(t))!G.call(e,o)&&o!==n&&_(e,o,{get:()=>t[o],enumerable:!(r=lt(t,o))||r.enumerable});return e};var xt=e=>ht(_({},"__esModule",{value:!0}),e);var Yt={};mt(Yt,{UnifyIntentClient:()=>v});module.exports=xt(Yt);var I="https://unifyintent.com/analytics/api/v1";var vt=/^[A-Za-z0-9._+%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$/;function O(e,t){var n;return((n=t==null?void 0:t.getTime())!=null?n:new Date().getTime())+e*60*1e3}var S=()=>({path:window.location.pathname,query:_t(window.location.href),referrer:document.referrer,title:document.title,url:window.location.href}),U=()=>({userAgent:window.navigator.userAgent,userAgentData:window.navigator.userAgentData}),C=e=>{if(vt.test(e))return e},_t=e=>{let t=new URL(e).searchParams,n={};for(let[r,o]of t.entries())n[r]=o;return n};var $=()=>{var n,r,o,i,s;let e=new URL(location.href),t={source:(n=e.searchParams.get("utm_source"))!=null?n:void 0,medium:(r=e.searchParams.get("utm_medium"))!=null?r:void 0,campaign:(o=e.searchParams.get("utm_campaign"))!=null?o:void 0,term:(i=e.searchParams.get("utm_term"))!=null?i:void 0,content:(s=e.searchParams.get("utm_content"))!=null?s:void 0};return A(d({locale:navigator.language},U()),{utm:t})};var k=class{constructor(t){this.getBaseActivityPayload=()=>({type:this.getActivityType(),anonymousUserId:this._intentContext.identityManager.getOrCreateAnonymousUserId(),sessionId:this._intentContext.sessionManager.getOrCreateSession().sessionId,context:$(),timestamp:new Date().toISOString()});this._intentContext=t}track(){this._intentContext.apiClient.post(this.getActivityURL(),d(d({},this.getBaseActivityPayload()),this.getActivityData()))}},b=k;var At=`${I}/page`,f=class extends b{constructor(){super(...arguments);this.getActivityData=()=>({type:"page",properties:S()})}getActivityType(){return"page"}getActivityURL(){return At}};var It=`${I}/identify`,g=class extends b{constructor(n,{email:r}){super(n);this.getActivityData=()=>({type:"identify",traits:{email:this._email}});this._email=r}getActivityType(){return"identify"}getActivityURL(){return It}};var E,St=new Uint8Array(16);function M(){if(!E&&(E=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!E))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(St)}var a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function J(e,t=0){return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}var Ut=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:Ut};function Ct(e,t,n){if(V.randomUUID&&!t&&!e)return V.randomUUID();e=e||{};let r=e.random||(e.rng||M)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=r[o];return t}return J(r)}var m=Ct;function w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var bt={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function K(e,t){function n(o,i,s){if(typeof document!="undefined"){s=w({},t,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var p in s)s[p]&&(c+="; "+p,s[p]!==!0&&(c+="="+s[p].split(";")[0]));return document.cookie=o+"="+e.write(i,o)+c}}function r(o){if(!(typeof document=="undefined"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],s={},c=0;c<i.length;c++){var p=i[c].split("="),dt=p.slice(1).join("=");try{var N=decodeURIComponent(p[0]);if(s[N]=e.read(dt,N),o===N)break}catch(Zt){}}return o?s[o]:s}}return Object.create({set:n,get:r,remove:function(o,i){n(o,"",w({},i,{expires:-1}))},withAttributes:function(o){return K(this.converter,w({},this.attributes,o))},withConverter:function(o){return K(w({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var j=K(bt,{path:"/"});var y=typeof Buffer=="function",X=typeof TextDecoder=="function"?new TextDecoder:void 0,Q=typeof TextEncoder=="function"?new TextEncoder:void 0,Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=Array.prototype.slice.call(Et),T=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(h),wt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),W=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Tt=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),et=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Pt=e=>{let t,n,r,o,i="",s=e.length%3;for(let c=0;c<e.length;){if((n=e.charCodeAt(c++))>255||(r=e.charCodeAt(c++))>255||(o=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|o,i+=h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[t&63]}return s?i.slice(0,s-3)+"===".substring(s):i},nt=typeof btoa=="function"?e=>btoa(e):y?e=>Buffer.from(e,"binary").toString("base64"):Pt,Dt=y?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,o=e.length;r<o;r+=4096)n.push(u.apply(null,e.subarray(r,r+4096)));return nt(n.join(""))};var Rt=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?u(192|t>>>6)+u(128|t&63):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|t&63)}},Bt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ft=e=>e.replace(Bt,Rt),tt=y?e=>Buffer.from(e,"utf8").toString("base64"):Q?e=>Dt(Q.encode(e)):e=>nt(Ft(e)),P=(e,t=!1)=>t?Tt(tt(e)):tt(e);var Lt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Nt=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return u((n>>>10)+55296)+u((n&1023)+56320);case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Ot=e=>e.replace(Lt,Nt),kt=e=>{if(e=e.replace(/\s+/g,""),!wt.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,o;for(let i=0;i<e.length;)t=T[e.charAt(i++)]<<18|T[e.charAt(i++)]<<12|(r=T[e.charAt(i++)])<<6|(o=T[e.charAt(i++)]),n+=r===64?u(t>>16&255):o===64?u(t>>16&255,t>>8&255):u(t>>16&255,t>>8&255,t&255);return n},rt=typeof atob=="function"?e=>atob(et(e)):y?e=>Buffer.from(e,"base64").toString("binary"):kt,Mt=y?e=>W(Buffer.from(e,"base64")):e=>W(rt(e).split("").map(t=>t.charCodeAt(0)));var Vt=y?e=>Buffer.from(e,"base64").toString("utf8"):X?e=>X.decode(Mt(e)):e=>Ot(rt(e)),Kt=e=>et(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),ot=e=>Vt(Kt(e));var z="test";function H(e){return P(JSON.stringify(e))}function it(e){return JSON.parse(ot(e))}function st(){try{return localStorage.setItem(z,z),localStorage.removeItem(z),!0}catch(e){return!1}}var Y=class{constructor(t){this.get=t=>{let n=this.retrieveValue(this.buildKey(t));return n?it(n):null};this.set=(t,n)=>{this.storeValue(this.buildKey(t),H(n))};this.buildKey=t=>H(`${this._writeKey}_${t}`);this._writeKey=t}},D=Y;var R=class extends D{retrieveValue(t){var n;return(n=j.get(t))!=null?n:null}storeValue(t,n){j.set(t,n)}};var B=class extends D{constructor(n){super(n);this.retrieveValue=n=>this._localStorageAvailable?localStorage.getItem(n):null;this.storeValue=(n,r)=>{this._localStorageAvailable&&localStorage.setItem(n,r)};this._localStorageAvailable=st()}};var at="anonymousUserId",F=class{constructor(t){this.getOrCreateAnonymousUserId=()=>{if(this._anonymousUserId)return this._anonymousUserId;let t=this.getAnonymousUserId()||this.createAnonymousUserId();return this._anonymousUserId=t,t};this.getAnonymousUserId=()=>this._storageService.get(at);this.createAnonymousUserId=()=>{let t=m();return this._storageService.set(at,t),t};this._storageService=new R(t),this._anonymousUserId=null}};var ut="clientSession",ct=30,L=class{constructor(t){this.getOrCreateSession=()=>this.getAndUpdateSession()||this.createSession();this.getAndUpdateSession=()=>{let t=this._currentSession||this.getStoredSession();if(!t)return;if(t.expiration>new Date().getTime())return this.updateSessionExpiration(t)};this.createSession=(t=ct)=>{let n=d({sessionId:m(),startTime:new Date,expiration:O(t),initial:S()},U());return this._currentSession=n,this.setStoredSession(n),n};this.updateSessionExpiration=(t,n=ct)=>{let r=A(d({},t),{expiration:O(n)});return this._currentSession=r,this.setStoredSession(r),r};this.getStoredSession=()=>this._storageService.get(ut);this.setStoredSession=t=>{this._storageService.set(ut,t)};this._writeKey=t,this._storageService=new B(this._writeKey),this._currentSession=null}};var x=class{constructor(t){this.post=(t,n)=>{let r=JSON.stringify(n),o=this.getAuthString(this._writeKey);if(fetch)fetch(t,{method:"POST",body:r,credentials:"include",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.getAuthString(this._writeKey)},keepalive:!0}).catch(()=>{});else{let i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-type","application/json; charset=UTF-8"),i.setRequestHeader("Authorization",o),i.send(r)}};this._writeKey=t}getAuthString(t){return`Basic ${P(t+":")}`}};var l=class{constructor(t){this.startAutoPage=()=>{this._historyMonitored||this.monitorHistory(),this._autoPage=!0};this.stopAutoPage=()=>{this._autoPage=!1};this.startAutoIdentify=()=>{this._autoIdentify=!0,this.refreshMonitoredInputs(),setInterval(this.refreshMonitoredInputs,2e3)};this.stopAutoIdentify=()=>{this._monitoredInputs.forEach(t=>{t.isConnected&&(t.removeEventListener("blur",this.handleInputBlur),t.removeEventListener("keydown",this.handleInputKeydown))}),this._monitoredInputs.clear(),this._autoIdentify=!1};this.monitorHistory=()=>{let t=history.pushState;history.pushState=(...r)=>{t.apply(history,r),this.maybeTrackPage()};let n=history.replaceState;history.replaceState=(...r)=>{let o=d({},window.location);n.apply(history,r),jt(o,window.location)&&this.maybeTrackPage()},window.addEventListener("popstate",()=>{this.maybeTrackPage()}),this._historyMonitored=!0};this.maybeTrackPage=()=>{this._autoPage&&new f(this._intentContext).track()};this.refreshMonitoredInputs=()=>{if(!this._autoIdentify)return;this._monitoredInputs.forEach(n=>{n.isConnected||this._monitoredInputs.delete(n)}),Array.from(document.getElementsByTagName("input")).filter(n=>!this._monitoredInputs.has(n)&&zt(n)).forEach(n=>{n.addEventListener("blur",this.handleInputBlur),n.addEventListener("keydown",this.handleInputKeydown),this._monitoredInputs.add(n)})};this.handleInputBlur=t=>{this._autoIdentify&&this.maybeIdentifyInputEmail(t)};this.handleInputKeydown=t=>{this._autoIdentify&&t.key==="Enter"&&this.maybeIdentifyInputEmail(t)};this.maybeIdentifyInputEmail=t=>{var r;if(!this._autoIdentify||!(t.target instanceof HTMLInputElement))return;let n=(r=t.target)==null?void 0:r.value;if(n){if(!C(n)||this._submittedEmails.has(n))return;new g(this._intentContext,{email:n}).track(),this._submittedEmails.add(n)}};this.__getMonitoredInputs=()=>this._monitoredInputs;this.__getSubmittedEmails=()=>this._submittedEmails;var n,r;this._intentContext=t,this._monitoredInputs=new Set,this._submittedEmails=new Set,this._autoPage=(n=t.clientConfig.autoPage)!=null?n:!1,this._autoIdentify=(r=t.clientConfig.autoIdentify)!=null?r:!1,this._historyMonitored=!1,this._autoPage&&(this.startAutoPage(),this.maybeTrackPage()),this._autoIdentify&&this.startAutoIdentify()}};function jt(e,t){return e.hostname!==t.hostname||e.pathname!==t.pathname}function zt(e){return e.type==="email"||e.type==="text"}var Ht={autoPage:!1,autoIdentify:!1},v=class{constructor(t,n=Ht){this.page=()=>{new f(this._context).track()};this.identify=t=>{let n=C(t);return n?(new g(this._context,{email:n}).track(),!0):!1};this.startAutoPage=()=>{this._intentAgent||(this._intentAgent=new l(this._context)),this._intentAgent.startAutoPage()};this.stopAutoPage=()=>{var t;(t=this._intentAgent)==null||t.stopAutoPage()};this.startAutoIdentify=()=>{this._intentAgent||(this._intentAgent=new l(this._context)),this._intentAgent.startAutoIdentify()};this.stopAutoIdentify=()=>{var t;(t=this._intentAgent)==null||t.stopAutoIdentify()};window.unify!==void 0&&!Array.isArray(window.unify)&&console.warn("Global UnifyIntentClient already exists, a new one will not be created.");let r=new x(t),o=new L(t);o.getOrCreateSession();let i=new F(t);i.getOrCreateAnonymousUserId(),this._context={writeKey:t,clientConfig:n,apiClient:r,sessionManager:o,identityManager:i},(n.autoPage||n.autoIdentify)&&(this._intentAgent=new l(this._context))}};
/*! Bundled license information:

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)
*/
